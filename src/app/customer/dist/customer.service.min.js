"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var a,i=arguments.length,n=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;0<=s;s--)(a=e[s])&&(n=(i<3?a(n):3<i?a(t,r,n):a(t,r))||n);return 3<i&&n&&Object.defineProperty(t,r,n),n};exports.__esModule=!0;var core_1=require("@angular/core"),Observable_1=require("rxjs/Observable");require("rxjs/add/operator/do"),require("rxjs/add/operator/catch"),require("rxjs/add/observable/throw"),require("rxjs/add/operator/map"),require("rxjs/add/observable/of");var CustomerService=function(){function e(e,t){this.http=e,this.backend=t,this.basicAction="customers/"}return e.prototype.getCustomers=function(){return this.backend.getAll(this.basicAction).map(this.extractData).catch(this.handleError)},e.prototype.getCustomer=function(e){if(0===e)return Observable_1.Observable.of(this.initializeCustomer());var t=""+this.basicAction+e;return this.backend.getById(t).map(this.extractData).catch(this.handleError)},e.prototype.deleteCustomer=function(e){var t=""+this.basicAction+e;return this.backend.delete(t).catch(this.handleError)},e.prototype.saveCustomer=function(e){return 0===e.id?this.createCustomer(e):this.updateCustomer(e)},e.prototype.createCustomer=function(e){return e.id=void 0,this.backend.create(this.basicAction,e).map(this.extractData).catch(this.handleError)},e.prototype.updateCustomer=function(e){var t=""+this.basicAction+e.id;return this.backend.update(t,e).map(function(){return e}).catch(this.handleError)},e.prototype.extractData=function(e){var t=e.json?e.json():e;return t.data?t.data:t||{}},e.prototype.handleError=function(e){return console.error(e),Observable_1.Observable.throw(e.json()||"Server error")},e.prototype.initializeCustomer=function(){return{id:0,avatar:null,firstname:null,lastname:null,rewards:0,email:null,membership:!1,mobile:null,phone:null}},e=__decorate([core_1.Injectable()],e)}();exports.CustomerService=CustomerService;
//# sourceMappingURL=customer.service.min.js.map
