"use strict";var __decorate=this&&this.__decorate||function(e,t,r,s){var o,i=arguments.length,a=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,s);else for(var n=e.length-1;0<=n;n--)(o=e[n])&&(a=(i<3?o(a):3<i?o(t,r,a):o(t,r))||a);return 3<i&&a&&Object.defineProperty(t,r,a),a};exports.__esModule=!0;var core_1=require("@angular/core"),shared_1=require("../shared"),paginator_1=require("@angular/material/paginator"),sort_1=require("@angular/material/sort"),table_1=require("@angular/material/table"),CustomerListComponent=function(){function e(e,t,r){this.customerService=e,this.dialog=t,this.snackBar=r,this.pageTitle="Customers",this.imageWidth=30,this.imageMargin=2,this.showImage=!1,this.listFilter={},this.displayedColumns=["avatar","firstname","lastname","rewards","email","membership","id"],this.dataSource=null,this.pager={},this.searchFilter={firstname:"",lastname:"",email:""}}return e.prototype.applyFilter=function(e){e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e},e.prototype.freshDataList=function(e){this.customers=e,this.dataSource=new table_1.MatTableDataSource(this.customers),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},e.prototype.ngOnInit=function(){var t=this;this.customerService.getCustomers().subscribe(function(e){t.freshDataList(e)},function(e){return t.errorMessage=e}),this.searchFilter={},this.listFilter={}},e.prototype.getCustomers=function(e){var t=this;this.customerService.getCustomers().subscribe(function(e){t.freshDataList(e)},function(e){return t.errorMessage=e})},e.prototype.searchCustomers=function(s){var t=this;s&&this.customerService.getCustomers().subscribe(function(e){t.customers=e,console.log(t.customers.length),t.customers=t.customers.filter(function(t){var r=!0;return Object.keys(s).forEach(function(e){r=r&&s[e]?-1<t[e].toLocaleLowerCase().indexOf(s[e].toLocaleLowerCase()):r}),r}),t.freshDataList(e)},function(e){return t.errorMessage=e})},e.prototype.resetListFilter=function(){this.listFilter={},this.getCustomers()},e.prototype.reset=function(){this.listFilter={},this.searchFilter={},this.getCustomers()},e.prototype.resetSearchFilter=function(e){e.toggle(),this.searchFilter={},this.getCustomers()},e.prototype.openSnackBar=function(e,t){this.snackBar.open(e,t,{duration:1500})},e.prototype.openDialog=function(t){var r=this,s=this.dialog.open(shared_1.ConfirmDialog,{data:{title:"Dialog",message:"Are you sure to delete this item?"}});s.disableClose=!0,s.afterClosed().subscribe(function(e){r.selectedOption=e,r.selectedOption===s.componentInstance.ACTION_CONFIRM&&r.customerService.deleteCustomer(t).subscribe(function(){r.customerService.getCustomers().subscribe(function(e){r.freshDataList(e)},function(e){return r.errorMessage=e}),r.openSnackBar("The item has been deleted successfully. ","Close")},function(e){r.errorMessage=e,console.log(r.errorMessage),r.openSnackBar("This item has not been deleted successfully. Please try again.","Close")})})},__decorate([core_1.ViewChild(paginator_1.MatPaginator)],e.prototype,"paginator"),__decorate([core_1.ViewChild(sort_1.MatSort)],e.prototype,"sort"),e=__decorate([core_1.Component({selector:"customer-list",templateUrl:"./customer-list.component.html",styleUrls:["./customer-list.component.css"],providers:[shared_1.ConfirmDialog]})],e)}();exports.CustomerListComponent=CustomerListComponent;
//# sourceMappingURL=customer-list.component.min.js.map
